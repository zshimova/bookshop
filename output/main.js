(()=>{"use strict";(()=>{let e=[{url:"./src/img/banners/banner.svg",title:"Black Friday Sale banner"},{url:"./src/img/banners/banner-2.svg",title:"Top 10 Books banner"},{url:"./src/img/banners/banner-3.svg",title:"Cozy Books banner"}];document.addEventListener("DOMContentLoaded",(()=>{!function(e,t){if(!e||!e.length)return;t=t||{dots:!1,titles:!1,autoplay:!1,autoplayInterval:5e3};const s=document.querySelector(".slider"),a=s.querySelector(".slider__images");function l(s){if(a.querySelector(".active").classList.remove("active"),a.querySelector(`.n${s}`).classList.add("active"),t.titles){let t=a.querySelector(".slider__images-title");e[s].title?(t.innerText=e[s].title,t.style.display="block"):t.style.display="none"}if(t.dots){let e=document.querySelector(".slider__dots");e.querySelector(".active").classList.remove("active"),e.querySelector(`.n${s}`).classList.add("active")}}e.forEach(((e,t)=>{let s=document.createElement("div");s.className=`image n${t} ${t?"":"active"}`,s.dataset.index=t,s.style.backgroundImage=`url(${e.url})`,a.appendChild(s)})),t.dots&&function(){let t=document.createElement("div");t.className="slider__dots",e.forEach(((e,s)=>{let a=document.createElement("div");a.className=`slider__dots-item n${s} ${s?"":"active"}`,a.dataset.index=s,a.addEventListener("click",(function(){l(this.dataset.index)})),t.appendChild(a)})),s.appendChild(t)}(),t.titles&&function(){let t=`<div class="slider__images-title">${e[0].title}</div>`;a.innerHTML+=t}(),t.autoplay&&setInterval((()=>{let t=+a.querySelector(".active").dataset.index;l(t===e.length-1?0:t+1)}),t.autoplayInterval)}(e,{dots:!0,titles:!1,autoplay:!0,autoplayInterval:5e3})}))})(),(()=>{let e=document.querySelector(".book-gallery__category-item").getAttribute("data-category"),t=0;const s=async()=>{let s=await fetch(`https://www.googleapis.com/books/v1/volumes?q="${e}"&key=AIzaSyC4NQMdGh19j2ElPgpWDLaXsdb7k_C_rLQ&printType=books&startIndex=${t}&maxResults=6&langRestrict=en`).then((e=>e.json())).then((e=>e.items)).catch((e=>{console.log(e)}));t+=6,s.forEach((e=>{let t=e.volumeInfo.imageLinks?.thumbnail??"./src/img/icons/logo.svg",s=e.volumeInfo.authors?.join(", ")??"Unknown Author",a=e.volumeInfo.title,l=e.volumeInfo?.description??"No description",n=e.volumeInfo?.ratingsCount??"";n&&(n=e.volumeInfo.ratingsCount+" reviews");let i="Without price",r="";"FOR_SALE"===e.saleInfo.saleability&&(i=e.saleInfo.retailPrice?.amount,r=e.saleInfo.retailPrice?.currencyCode);let o=`<div class="book-gallery__book" id="${e.id}">\n            <img src="${t}" alt="${e.title}" class="book-gallery__book-img">\n            <div class="book-gallery__info">\n                <div class="book-gallery__first-block">\n                    <h3 class="author">${s}</h3>\n                    <h2 class="title">${a}</h2>\n                    <div class="rating">\n                        <div class="review-stars">\n                            <div class="count">${n}<span></span></div>\n                            <div class="stars">\n                                <img src="./src/img/icons/gray-star.svg" class="review-star">\n                                <img src="./src/img/icons/gray-star.svg" class="review-star">\n                                <img src="./src/img/icons/gray-star.svg" class="review-star">\n                                <img src="./src/img/icons/gray-star.svg" class="review-star">\n                                <img src="./src/img/icons/gray-star.svg" class="review-star">\n                            </div>\n                        </div>\n                        \n                    </div>\n                </div>\n                <div class="book-gallery__second-block">\n                    <p class="description">${l}</p>\n                    <span class="price">${i}${r}</span>\n                    <button class="btn" id="${e.id}"><a class="" href="#" onclick="return false;">BUY NOW</a></button>\n                </div>\n            </div>\n        </div>`;document.querySelector(".book-gallery__books").innerHTML+=o;let c=document.getElementById(e.id).querySelectorAll(".review-star"),d=Math.floor(e.volumeInfo.averageRating);for(let e=0;e<d;e++)c[e].src="./src/img/icons/gold-star.svg"}));const a=Array.from(document.querySelectorAll(".btn")),l=document.querySelector(".header__icons-bag");a.forEach((e=>{Object.prototype.hasOwnProperty.call(localStorage,e.id)&&(e.classList.add("added"),e.innerHTML="IN THE CART");let t=`<div class="items-number">${Object.keys(localStorage).length}</div>`;Object.keys(localStorage).length>0&&(l.innerHTML=t),e.addEventListener("click",(()=>{const s=e.id;e.classList.contains("added")?e.classList.contains("added")&&(e.innerHTML="BUY NOW",e.classList.remove("added"),localStorage.removeItem(s,e.id)):(e.innerHTML="IN THE CART",e.classList.add("added"),localStorage.setItem(s,e.id)),t=`<div class="items-number">${Object.keys(localStorage).length}</div>`,l.innerHTML=t,0==Object.keys(localStorage).length&&(l.innerHTML=" ")}))}))};s(),document.addEventListener("click",(t=>{t.target.classList.contains("book-gallery__category-item")&&(t.preventDefault(),document.querySelector(".book-gallery__category-item.active")?.classList?.remove("active"),t.target.classList.add("active"),document.querySelector(".book-gallery__books").innerHTML="",e=t.target.innerText,s()),t.target.classList.contains("load-more")&&s()}))})()})();